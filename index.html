
<!DOCTYPE html>
<html lang="en">
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <link href="stylenav.css" rel="stylesheet" type="text/css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

  <title>Survey Bayesian Networks</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  
</head>

<body>

<!-- Navigation bar -->
<nav class="navbar navbar-default navbar-fixed-top navbar-customclass">
  <div class="container">
    <div class="navbar-header">
      <a class="navbar-brand" href="#index.html" style="color: #BC2F31"><strong>Survey</strong></a>

      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      <sapn class="icon-bar"></sapn>
      </button>
    </div>
    <ul class="nav navbar-nav navbar-right collapse navbar-collapse">
      <li class="active"><a href="#info">Information</a></li>
	      <li><a href="#consent">Consent Form</a></li>
		
		<li><a href="#demographics">Demographics</a></li>
		
		
				<li><a href="#instructions">Instructions</a></li>

<!--
		q1 => treatment no mistake
		q2  => control no mistake
		q3 => treatment mistake
		q4 => ccontrol mistake
-->
      <li><a href="#q1">Q1</a></li>
		<li><a href="#q2">Q2</a></li>
		<li><a href="#q3">Q3</a></li>
		<li><a href="#q4">Q4</a></li>
    </ul>
  </div>
</nav>

<div class="jumbotron text-center" id="index.html">
<h1>Survey on Bayesian Networks</h1>
</div>

<div class="container">
  <div class="row" id="info">
	  <h1>Participants Information</h1>
	  
	<table class="table table-bordered">
		<thead>

  <tbody>
    <tr>
      <td>
Project title:</td>
      <td></td>
    </tr>
    <tr>
      <td>Principal investigator:</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>Researchers collecting data</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>Funder (if applicable):</td>
      <td>&nbsp;</td>
    </tr>
	  
  </tbody>
		</thead>
</table>


	
	 <h4>

This study was certified according to the <span style="color:red;">BLA BLA</span>, RT number <span style="color:red;">BLA BLA</span>. Please take time to read the following information carefully. You should keep this page for your records. <br><br>

1. Who are the researchers? <br>
This study is conducted by Jaime Sevilla and Miruna-Adriana Clinciu  <span style="color:red;">MORE INFO ABOUT US</span>. <br><br>

2. What is the purpose of the study? <br>
Computers are making many decisions on our behalf and it is important for people to be able to understand the decisions that are being made. The point of this study is to provide people with various types of explanations of computer decisions so that we can learn what types of explanations work best.  <span style="color:red;">BLA BLA our own summary</span> <br><br>

3. Why have I been asked to take part? <br>
Explanations should  be understandable by most adults who are familiar with the Internet and computing technology. You have been asked to participate because we believe you are over 18 years old and fit this profile.   <span style="color:red;"> Fom previous study, needs modified</span> <br><br>

4. Do I have to take part? <br>
No – participation in this study is entirely up to you. You can withdraw from the study at any time, without giving a reason. Your rights will not be affected. If you wish to withdraw, contact the PI. We will stop using your data in any publications or presentations submitted after you have withdrawn consent. However, we will keep copies of your original consent, and of your withdrawal request. <br><br>

5. What will happen if I decide to take part? <br>
You will be asked to take an online survey that is approximately  <span style="color:red;">we need to see how much time it takes in a pilot </span> minutes long. The survey will show you one graph and explanations generated about it. You will then be asked to provide feedback about how understandable the explanations and graphs are.  We will also collect basic demographic information such as age range and gender.   <span style="color:red;">TO BE MODIFIED</span> <br><br>

6. Compensation. <br>
You will not be compensated for your participation in this study. <br><br>


7. Are there any risks associated with taking part?<br>
There are no significant risks associated with participation. <br><br>
 
8. What will happen to the results of this study? <br>
The results of this study may be summarised in published articles, reports and presentations. Quotes or key findings will be anonymized: we will remove any information that could, in our assessment, allow anyone to identify you. With your consent, information can also be used for future research. The full survey data may be archived for a minimum of 2 years. <br><br>

9. Data sharing and access. <br>
An anonymised version of the collected dataset will be made available for public download in order to support open science and reproducibility of research results. We will remove all identifying data from this data set, such as any answers that we feel may identify you. <br><br>

10. Data protection and confidentiality.<br>
The full survey data will be processed in accordance with the Data Protection Law.  All information collected about you will be kept strictly confidential. Your data will be referred to by a unique participant number rather than by name. All electronic data will be stored on a password-protected encrypted computer, on the  <span style="color:red;"> THE PLACE ARE KEPT FILES E.G. UNIVERSITY FO ABERDEEN </span>  secure file servers, or on the University’s secure encrypted cloud storage services (DataShare, ownCloud, or Sharepoint) and all paper records will be stored in a locked filing cabinet in the PI’s office. Your consent information will be kept separately from your responses in order to minimise risk. <br><br>
  
11. What are my data protection rights? <br>
The  <span style="color:red;">uNIVERSITY OF aBDERDEEN?</span>is a Data Controller for the information you provide. You have the right to access information held about you. Your right of access can be exercised in accordance with Data Protection Law. You also have other rights including rights of correction, erasure and objection. However, we recommend that you exercise these rights shortly after the survey, as after we will remove your identifying data it will no longer be possible for us to identify which rows contain your data. For more details, including the right to lodge a complaint with the Information Commissioner’s Office, please visit www.ico.org.uk. Questions, comments and requests about your personal data can also be sent to the University Data Protection Officer at  <span style="color:red;">EMAIL ??? </span>. <br><br>

12. Who can I contact? <br>
If you have any further questions about the study, please contact, Miruna Clinciu via email mc191@hw.ac.uk or Jaime Sevila via email  <span style="color:red;">to verify and add email</span><br>.
		 
If you wish to make a complaint about the study, please contact  <span style="color:red;">uNIVERSITY OF aBDERDEEN?</span>. When you contact us, please provide the study title and detail the nature of your complaint.<br><br>

13. Updated information.<br>
If the research project changes in any way, an updated Participant Information Sheet will be made available on  <span style="color:red;">BLA BLA</span>. <br><br>
14. Alternative formats. <br>
To request this document in an alternative format, such as large print or on coloured paper, please contact Miruna Clinciu via email mc191@hw.ac.uk. <br><br>
15. General information. <br>
For general information about how we use your data, go to: <span style="color:red;">BLA BLA privacy research </span>. <br><br>

 </h4>
	  
	</div>
	<hr>
	
	<div class="row" id="consent"> 	  
  <h1>Consent Form</h1> 
  
  <!-- Libraries for SurveyJS -->
<link href="https://unpkg.com/survey-jquery@1.8.60/modern.css" type="text/css" rel="stylesheet" />
<script src="https://unpkg.com/survey-jquery@1.8.60/survey.jquery.min.js"></script>

<!-- Form container -->
<div id="consentFormContainer"></div>
  
<script>
Survey.StylesManager.applyTheme("modern");

var surveyJSON = { surveyId: '67a2625c-4cef-4342-a966-74432c5cb3e8', 
                   surveyPostId: '38fc3d75-8b29-4c2d-ad2e-d84aed291ba5'}

var survey = new Survey.Model(surveyJSON);
$("#consentFormContainer").Survey({
    model: survey,
});
</script>

  
	</div>
  
	
	<div class="row"  id="demographics"> 	  
  <h1>Demographics</h1> 
		
		
		AGE STUFF RELATED
	</div>
	
	
	
	
	
	 <div class="row" id="instructions">
	    <h1>Instructions</h1> 

	 <p class="textbig">

<br>Here you will see a Bayesian Network, some evidence and an explained output.

<br>The Bayesian Network we will be using as an example is used for medical diagnosis. 
<br>In particular, it is used to determine the chances that a patient has lung cancer, given their symptoms, risk factors and medical history.
 </p>
	
  
	

  <!-- Bayesian Network graph -->
	<img src="/explainBN/static/graph.png" />
	</div>
	 <hr> 
   
	<table class="table table-bordered">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Variable</th>
      <th>Meaning</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>smoke</td>
      <td>Whether the patient smokes</td>
    </tr>
    <tr>
      <th>1</th>
      <td>asia</td>
      <td>Whether the patient has recently been to Asia</td>
    </tr>
    <tr>
      <th>2</th>
      <td>lung</td>
      <td>Whether the patient has lung cancer</td>
    </tr>
    <tr>
      <th>3</th>
      <td>bronc</td>
      <td>Whether the patient has bronchitis</td>
    </tr>
    <tr>
      <th>4</th>
      <td>tub</td>
      <td>Whether the patient has tuberculosis</td>
    </tr>
    <tr>
      <th>5</th>
      <td>lung_disease</td>
      <td>True if the patient has either lung cancer or tuberculosis</td>
    </tr>
    <tr>
      <th>6</th>
      <td>xray</td>
      <td>Whether the patient's xray results show an abnormality</td>
    </tr>
    <tr>
      <th>7</th>
      <td>dysp</td>
      <td>Whether the patient experiences shortness of breath (dyspnea)</td>
    </tr>
  </tbody>
</table>
	 
  <h1 id="q1">Treatment no mistake</h1>
  
  <div>
  
  <p> We have observed that: </p>
  
  <ul>
  
    <li>the patient has tuberculosis</li>
  
    <li>the patient does not experience shortness of breath</li>
  
    <li>the patient does not smoke</li>
  
  </ul>
</div>
  
  <style>
/* Style the tab */
.tab {
  overflow: hidden;
  border: 1px solid #ccc;
  background-color: #f1f1f1;
}

/* Style the buttons that are used to open the tab content */
.tab button {
  background-color: inherit;
  float: left;
  border: none;
  outline: none;
  cursor: pointer;
  padding: 14px 16px;
  transition: 0.3s;
}

/* Change background color of buttons on hover */
.tab button:hover {
  background-color: #ddd;
}

/* Create an active/current tablink class */
.tab button.active {
  background-color: #ccc;
}

/* Style the tab content */
.tabcontent {
  display: none;
  padding: 6px 12px;
  border: 1px solid #ccc;
  border-top: none;
}
</style>

<script>
function openTab(evt, tabName) {
  // Declare all variables
  var i, tabcontent, tablinks;

  // Get all elements with class="tabcontent" and hide them
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }

  // Get all elements with class="tablinks" and remove the class "active"
  tablinks = document.getElementsByClassName("tablinks");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }

  // Show the current tab, and add an "active" class to the button that opened the tab
  document.getElementById(tabName).style.display = "block";
  evt.currentTarget.className += " active";
}
</script>

<div class="tab">

  <button class="tablinks" onclick="openTab(event, 'explanation_treatment_no_mistake_0')" id="explanation_treatment_no_mistake_button_0">
    0
  </button>

  <button class="tablinks" onclick="openTab(event, 'explanation_treatment_no_mistake_1')" id="explanation_treatment_no_mistake_button_1">
    1
  </button>

  <button class="tablinks" onclick="openTab(event, 'explanation_treatment_no_mistake_2')" id="explanation_treatment_no_mistake_button_2">
    2
  </button>

  <button class="tablinks" onclick="openTab(event, 'explanation_treatment_no_mistake_3')" id="explanation_treatment_no_mistake_button_3">
    3
  </button>

</div>



  <div id="explanation_treatment_no_mistake_0", class="tabcontent">
  <p>
  
     The baseline probability that the patient has lung cancer is 5.50% 
  
  </p> <hr>
  <img src="/explainBN/static/io_no_mistake_0.png" />
  </div>

  <div id="explanation_treatment_no_mistake_1", class="tabcontent">
  <p>
  
     We have observed that the patient does not smoke 
  
     this greatly decreases the likelihood that the patient has lung cancer 
  
     This consideration changes the probability that the patient has lung cancer from 5.50% to 1.00% 
  
  </p> <hr>
  <img src="/explainBN/static/graph_1.png" />
  </div>

  <div id="explanation_treatment_no_mistake_2", class="tabcontent">
  <p>
  
     We have observed that the patient does not smoke 
  
     this moderately decreases the likelihood that the patient has bronchitis 
  
     on the other hand, we have observed that the patient does not experience shortness of breath 
  
     this greatly increases the likelihood that the patient does not have a serious lung disease 
  
     this moderately decreases the likelihood that the patient has lung cancer 
  
     This consideration changes the probability that the patient has lung cancer from 1.00% to 0.52% 
  
  </p> <hr>
  <img src="/explainBN/static/graph_2.png" />
  </div>

  <div id="explanation_treatment_no_mistake_3", class="tabcontent">
  <p>
  
     After taking into account these 3 arguments, we conclude that the probability that the patient has lung cancer is 0.52% 
  
  </p> <hr>
  <img src="/explainBN/static/graph_3.png" />
  </div>


<script>
// Get the element with id="button 0" and click on it
document.getElementById("explanation_treatment_no_mistake_button_0").click();
</script>
  
  
<link href="https://unpkg.com/survey-jquery@1.8.60/modern.css" type="text/css" rel="stylesheet" />
<script src="https://unpkg.com/survey-jquery@1.8.60/survey.jquery.min.js"></script>

<!-- SurveyJS container -->
<div id="surveyContainer_survey_treatment_no_mistake"></div>

<!-- Script that fetches and submits the survey -->
<script>
Survey.StylesManager.applyTheme("modern");

function sendDataToServer_survey_treatment_no_mistake(survey) {
  survey.setValue("bn", "asia")
  survey.setValue("p", 0.005218071612272695)
  survey.setValue("is_treatment", true)
  survey.setValue("mistake", "no mistake")
  survey.sendResult('2fd3f481-70d1-4b40-ab8b-611d89238ad5');
}

var surveyJSON = { surveyId: 'b48b6122-d333-462a-bd57-34ca878560e7', 
                   surveyPostId: '2fd3f481-70d1-4b40-ab8b-611d89238ad5'}

var survey_survey_treatment_no_mistake = new Survey.Model(surveyJSON);

$("#surveyContainer_survey_treatment_no_mistake").Survey({
    model: survey_survey_treatment_no_mistake,
    onComplete: sendDataToServer_survey_treatment_no_mistake
});
</script>
  
  
  <h1 id="q2">Control no mistake</h1>
  
  <div>
  
  <p> We have observed that: </p>
  
  <ul>
  
    <li>the patient does not have bronchitis</li>
  
    <li>the patient experiences shortness of breath</li>
  
    <li>the patient has not recently visited Asia</li>
  
    <li>the patient&#39;s xray results show an abnormality</li>
  
    <li>the patient does not smoke</li>
  
  </ul>
</div>
  
  <!-- Libraries for JSBayes-viz -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script src="/explainBN/static/node_modules/d3/d3.js"></script>
<script src="/explainBN/static/node_modules/lodash/lodash.js"></script>
<script src="/explainBN/static/node_modules/graphlib/dist/graphlib.core.js"></script>
<script src="/explainBN/static/node_modules/dagre/dist/dagre.core.js"></script>
<script src="/explainBN/static/node_modules/jsbayes/jsbayes.js"></script>
<script src="/explainBN/static/node_modules/jsbayes-viz/jsbayes-viz.js"></script>

<style>
    svg { border: 1px solid black; }
    svg g rect.node-shape { border-radius: 5px !important; fill:#cceeff !important; cursor: move; }
    svg g text.node-name { font-weight: 800 !important }
    svg g rect.node-bar { fill: DodgerBlue !important }
    svg g text.node-value { fill:rgb(0,0,0) !important; font-size: 15px; cursor: pointer; }
    svg line.edge-line { stroke:rgb(0,0,0) !important }
    svg path.edge-head { fill:rgb(0,0,0) !important }
</style>

<script>
  function getGraph_explanation_control_no_mistake() {
    
    var graph = jsbayes.newGraph();
    graph.saveSamples = false;
    
    <!-- Add nodes to graph -->
    
    var asia = graph.addNode( 'asia', [ 'yes',   'no',  ]);
    
    var tub = graph.addNode( 'tub', [ 'yes',   'no',  ]);
    
    var smoke = graph.addNode( 'smoke', [ 'yes',   'no',  ]);
    
    var lung = graph.addNode( 'lung', [ 'yes',   'no',  ]);
    
    var bronc = graph.addNode( 'bronc', [ 'yes',   'no',  ]);
    
    var lung_disease = graph.addNode( 'lung_disease', [ 'yes',   'no',  ]);
    
    var xray = graph.addNode( 'xray', [ 'abnormal',   'normal',  ]);
    
    var dysp = graph.addNode( 'dysp', [ 'yes',   'no',  ]);
    
    
    <!-- Add edges to graph -->
    
    tub.addParent(asia);
    
    lung_disease.addParent(tub);
    
    lung.addParent(smoke);
    
    bronc.addParent(smoke);
    
    lung_disease.addParent(lung);
    
    dysp.addParent(bronc);
    
    xray.addParent(lung_disease);
    
    dysp.addParent(lung_disease);
    
    
    <!-- Add CPDs to graph -->
    
    asia.setCpt([0.01, 0.99]);
    
    tub.setCpt([[0.05, 0.95], [0.01, 0.99]]);
    
    smoke.setCpt([0.5, 0.5]);
    
    lung.setCpt([[0.1, 0.9], [0.01, 0.99]]);
    
    bronc.setCpt([[0.6, 0.4], [0.3, 0.7]]);
    
    lung_disease.setCpt([[1.0, 0.0], [1.0, 0.0], [1.0, 0.0], [0.0, 1.0]]);
    
    xray.setCpt([[0.98, 0.02], [0.05, 0.95]]);
    
    dysp.setCpt([[0.9, 0.1], [0.7, 0.3], [0.8, 0.2], [0.1, 0.9]]);
    

    graph.sample(20000);

    var g = jsbayesviz.fromGraph(graph);
    return g;
  }
      
  $(document).ready(function() {
    (function(window) { 
      var graph_explanation_control_no_mistake = getGraph_explanation_control_no_mistake();
      jsbayesviz.draw({
        id: '#explanation_control_no_mistake',
        width: 800,
        height: 800,
        graph: graph_explanation_control_no_mistake,
        samples: 15000
      });
      
      
    })(window);
  });
</script>

<svg id="explanation_control_no_mistake"></svg>
  
  
<link href="https://unpkg.com/survey-jquery@1.8.60/modern.css" type="text/css" rel="stylesheet" />
<script src="https://unpkg.com/survey-jquery@1.8.60/survey.jquery.min.js"></script>

<!-- SurveyJS container -->
<div id="surveyContainer_survey_control_no_mistake"></div>

<!-- Script that fetches and submits the survey -->
<script>
Survey.StylesManager.applyTheme("modern");

function sendDataToServer_survey_control_no_mistake(survey) {
  survey.setValue("bn", "asia")
  survey.setValue("p", 0.36977344638554543)
  survey.setValue("is_treatment", false)
  survey.setValue("mistake", "no mistake")
  survey.sendResult('2fd3f481-70d1-4b40-ab8b-611d89238ad5');
}

var surveyJSON = { surveyId: 'b48b6122-d333-462a-bd57-34ca878560e7', 
                   surveyPostId: '2fd3f481-70d1-4b40-ab8b-611d89238ad5'}

var survey_survey_control_no_mistake = new Survey.Model(surveyJSON);

$("#surveyContainer_survey_control_no_mistake").Survey({
    model: survey_survey_control_no_mistake,
    onComplete: sendDataToServer_survey_control_no_mistake
});
</script>
  
  
  <h1 id="q3">Treatment mistake</h1>
  
  <div>
  
  <p> We have observed that: </p>
  
  <ul>
  
    <li>the patient has not recently visited Asia</li>
  
  </ul>
</div>
  
  <style>
/* Style the tab */
.tab {
  overflow: hidden;
  border: 1px solid #ccc;
  background-color: #f1f1f1;
}

/* Style the buttons that are used to open the tab content */
.tab button {
  background-color: inherit;
  float: left;
  border: none;
  outline: none;
  cursor: pointer;
  padding: 14px 16px;
  transition: 0.3s;
}

/* Change background color of buttons on hover */
.tab button:hover {
  background-color: #ddd;
}

/* Create an active/current tablink class */
.tab button.active {
  background-color: #ccc;
}

/* Style the tab content */
.tabcontent {
  display: none;
  padding: 6px 12px;
  border: 1px solid #ccc;
  border-top: none;
}
</style>

<script>
function openTab(evt, tabName) {
  // Declare all variables
  var i, tabcontent, tablinks;

  // Get all elements with class="tabcontent" and hide them
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }

  // Get all elements with class="tablinks" and remove the class "active"
  tablinks = document.getElementsByClassName("tablinks");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }

  // Show the current tab, and add an "active" class to the button that opened the tab
  document.getElementById(tabName).style.display = "block";
  evt.currentTarget.className += " active";
}
</script>

<div class="tab">

  <button class="tablinks" onclick="openTab(event, 'explanation_treatment_mistake_0')" id="explanation_treatment_mistake_button_0">
    0
  </button>

  <button class="tablinks" onclick="openTab(event, 'explanation_treatment_mistake_1')" id="explanation_treatment_mistake_button_1">
    1
  </button>

</div>



  <div id="explanation_treatment_mistake_0", class="tabcontent">
  <p>
  
     The baseline probability that the patient has lung cancer is 5.50% 
  
  </p> <hr>
  <img src="/explainBN/static/io_mistake_0.png" />
  </div>

  <div id="explanation_treatment_mistake_1", class="tabcontent">
  <p>
  
     After taking into account these 1 arguments, we conclude that the probability that the patient has lung cancer is 5.50% 
  
  </p> <hr>
  <img src="/explainBN/static/graph_1.png" />
  </div>


<script>
// Get the element with id="button 0" and click on it
document.getElementById("explanation_treatment_mistake_button_0").click();
</script>
  
  
<link href="https://unpkg.com/survey-jquery@1.8.60/modern.css" type="text/css" rel="stylesheet" />
<script src="https://unpkg.com/survey-jquery@1.8.60/survey.jquery.min.js"></script>

<!-- SurveyJS container -->
<div id="surveyContainer_survey_treatment_mistake"></div>

<!-- Script that fetches and submits the survey -->
<script>
Survey.StylesManager.applyTheme("modern");

function sendDataToServer_survey_treatment_mistake(survey) {
  survey.setValue("bn", "asia")
  survey.setValue("p", 0.05499999999999999)
  survey.setValue("is_treatment", true)
  survey.setValue("mistake", "dysp")
  survey.sendResult('2fd3f481-70d1-4b40-ab8b-611d89238ad5');
}

var surveyJSON = { surveyId: 'b48b6122-d333-462a-bd57-34ca878560e7', 
                   surveyPostId: '2fd3f481-70d1-4b40-ab8b-611d89238ad5'}

var survey_survey_treatment_mistake = new Survey.Model(surveyJSON);

$("#surveyContainer_survey_treatment_mistake").Survey({
    model: survey_survey_treatment_mistake,
    onComplete: sendDataToServer_survey_treatment_mistake
});
</script>
  
  <h1 id="q4">Control mistake</h1>
  
  <div>
  
  <p> We have observed that: </p>
  
  <ul>
  
    <li>the patient has not recently visited Asia</li>
  
    <li>the patient&#39;s xray results are normal</li>
  
    <li>the patient does not smoke</li>
  
  </ul>
</div>
  
  <!-- Libraries for JSBayes-viz -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script src="/explainBN/static/node_modules/d3/d3.js"></script>
<script src="/explainBN/static/node_modules/lodash/lodash.js"></script>
<script src="/explainBN/static/node_modules/graphlib/dist/graphlib.core.js"></script>
<script src="/explainBN/static/node_modules/dagre/dist/dagre.core.js"></script>
<script src="/explainBN/static/node_modules/jsbayes/jsbayes.js"></script>
<script src="/explainBN/static/node_modules/jsbayes-viz/jsbayes-viz.js"></script>

<style>
    svg { border: 1px solid black; }
    svg g rect.node-shape { border-radius: 5px !important; fill:#cceeff !important; cursor: move; }
    svg g text.node-name { font-weight: 800 !important }
    svg g rect.node-bar { fill: DodgerBlue !important }
    svg g text.node-value { fill:rgb(0,0,0) !important; font-size: 15px; cursor: pointer; }
    svg line.edge-line { stroke:rgb(0,0,0) !important }
    svg path.edge-head { fill:rgb(0,0,0) !important }
</style>

<script>
  function getGraph_explanation_control_mistake() {
    
    var graph = jsbayes.newGraph();
    graph.saveSamples = false;
    
    <!-- Add nodes to graph -->
    
    var asia = graph.addNode( 'asia', [ 'yes',   'no',  ]);
    
    var tub = graph.addNode( 'tub', [ 'yes',   'no',  ]);
    
    var smoke = graph.addNode( 'smoke', [ 'yes',   'no',  ]);
    
    var lung = graph.addNode( 'lung', [ 'yes',   'no',  ]);
    
    var bronc = graph.addNode( 'bronc', [ 'yes',   'no',  ]);
    
    var lung_disease = graph.addNode( 'lung_disease', [ 'yes',   'no',  ]);
    
    var xray = graph.addNode( 'xray', [ 'abnormal',   'normal',  ]);
    
    var dysp = graph.addNode( 'dysp', [ 'yes',   'no',  ]);
    
    
    <!-- Add edges to graph -->
    
    tub.addParent(asia);
    
    lung_disease.addParent(tub);
    
    lung.addParent(smoke);
    
    bronc.addParent(smoke);
    
    lung_disease.addParent(lung);
    
    dysp.addParent(bronc);
    
    xray.addParent(lung_disease);
    
    dysp.addParent(lung_disease);
    
    
    <!-- Add CPDs to graph -->
    
    asia.setCpt([0.01, 0.99]);
    
    tub.setCpt([[0.05, 0.95], [0.01, 0.99]]);
    
    smoke.setCpt([0.5, 0.5]);
    
    lung.setCpt([[0.1, 0.9], [0.01, 0.99]]);
    
    bronc.setCpt([[0.6, 0.4], [0.3, 0.7]]);
    
    lung_disease.setCpt([[1.0, 0.0], [1.0, 0.0], [1.0, 0.0], [0.0, 1.0]]);
    
    xray.setCpt([[0.98, 0.02], [0.05, 0.95]]);
    
    dysp.setCpt([[0.9, 0.1], [0.7, 0.3], [0.8, 0.2], [0.1, 0.9]]);
    

    graph.sample(20000);

    var g = jsbayesviz.fromGraph(graph);
    return g;
  }
      
  $(document).ready(function() {
    (function(window) { 
      var graph_explanation_control_mistake = getGraph_explanation_control_mistake();
      jsbayesviz.draw({
        id: '#explanation_control_mistake',
        width: 800,
        height: 800,
        graph: graph_explanation_control_mistake,
        samples: 15000
      });
      
      
    })(window);
  });
</script>

<svg id="explanation_control_mistake"></svg>
  
  
<link href="https://unpkg.com/survey-jquery@1.8.60/modern.css" type="text/css" rel="stylesheet" />
<script src="https://unpkg.com/survey-jquery@1.8.60/survey.jquery.min.js"></script>

<!-- SurveyJS container -->
<div id="surveyContainer_survey_control_mistake"></div>

<!-- Script that fetches and submits the survey -->
<script>
Survey.StylesManager.applyTheme("modern");

function sendDataToServer_survey_control_mistake(survey) {
  survey.setValue("bn", "asia")
  survey.setValue("p", 0.6779196767898106)
  survey.setValue("is_treatment", false)
  survey.setValue("mistake", "lung")
  survey.sendResult('2fd3f481-70d1-4b40-ab8b-611d89238ad5');
}

var surveyJSON = { surveyId: 'b48b6122-d333-462a-bd57-34ca878560e7', 
                   surveyPostId: '2fd3f481-70d1-4b40-ab8b-611d89238ad5'}

var survey_survey_control_mistake = new Survey.Model(surveyJSON);

$("#surveyContainer_survey_control_mistake").Survey({
    model: survey_survey_control_mistake,
    onComplete: sendDataToServer_survey_control_mistake
});
</script>
   
  
  
  </div>
</div>   
    
</body>
</html>
