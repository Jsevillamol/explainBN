
<!DOCTYPE html>
<html lang="en">
<head>
  <style>
    svg { border: 1px solid black; }
    svg g rect.node-shape { border-radius: 5px !important; fill:#cceeff !important; cursor: move; }
    svg g text.node-name { font-weight: 800 !important }
    svg g rect.node-bar { fill: DodgerBlue !important }
    svg g text.node-value { fill:rgb(0,0,0) !important; font-size: 15px; cursor: pointer; }
    svg line.edge-line { stroke:rgb(0,0,0) !important }
    svg path.edge-head { fill:rgb(0,0,0) !important }
  </style>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
  <script src="/static/node_modules/d3/d3.js"></script>
  <script src="/static/node_modules/lodash/lodash.js"></script>
  <script src="/static/node_modules/graphlib/dist/graphlib.core.js"></script>
  <script src="/static/node_modules/dagre/dist/dagre.core.js"></script>
  <script src="/static/node_modules/jsbayes/jsbayes.js"></script>
  <script src="/static/node_modules/jsbayes-viz/jsbayes-viz.js"></script>
	  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <link href="stylenav.css" rel="stylesheet" type="text/css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <script>
    function getGraph() {
      
      var graph = jsbayes.newGraph();
      graph.saveSamples = false;
      
      <!-- Add nodes to graph -->
      
      var asia = graph.addNode( 'asia', [ 'yes',   'no',  ]);
      
      var tub = graph.addNode( 'tub', [ 'yes',   'no',  ]);
      
      var smoke = graph.addNode( 'smoke', [ 'yes',   'no',  ]);
      
      var lung = graph.addNode( 'lung', [ 'yes',   'no',  ]);
      
      var bronc = graph.addNode( 'bronc', [ 'yes',   'no',  ]);
      
      var either = graph.addNode( 'either', [ 'yes',   'no',  ]);
      
      var xray = graph.addNode( 'xray', [ 'yes',   'no',  ]);
      
      var dysp = graph.addNode( 'dysp', [ 'yes',   'no',  ]);
      
      
      <!-- Add edges to graph -->
      
      tub.addParent(asia);
      
      either.addParent(tub);
      
      lung.addParent(smoke);
      
      bronc.addParent(smoke);
      
      either.addParent(lung);
      
      dysp.addParent(bronc);
      
      xray.addParent(either);
      
      dysp.addParent(either);
      
      
      <!-- Add CPDs to graph -->
      
      asia.setCpt([0.01, 0.99]);
      
      tub.setCpt([[0.05, 0.95], [0.01, 0.99]]);
      
      smoke.setCpt([0.5, 0.5]);
      
      lung.setCpt([[0.1, 0.9], [0.01, 0.99]]);
      
      bronc.setCpt([[0.6, 0.4], [0.3, 0.7]]);
      
      either.setCpt([[1.0, 0.0], [1.0, 0.0], [1.0, 0.0], [0.0, 1.0]]);
      
      xray.setCpt([[0.98, 0.02], [0.05, 0.95]]);
      
      dysp.setCpt([[0.9, 0.1], [0.7, 0.3], [0.8, 0.2], [0.1, 0.9]]);
      

      graph.sample(20000);

      var g = jsbayesviz.fromGraph(graph);
      return g;
    }
        
    $(document).ready(function() {
      (function(window) { 
        var graph = getGraph();
        jsbayesviz.draw({
          id: '#bbn',
          width: 800,
          height: 800,
          graph: graph,
          samples: 15000
        });
        
        
      })(window);
    });
  </script>
  <title>Survey Bayesian Networks</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</head>

<body>
<nav class="navbar navbar-default navbar-fixed-top navbar-customclass">
  <div class="container">
    <div class="navbar-header">
      <a class="navbar-brand" href="/template.html" style="color: #BC2F31"><strong>Survey</strong></a>

      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      <sapn class="icon-bar"></sapn>
      </button>
    </div>
    <ul class="nav navbar-nav navbar-right collapse navbar-collapse">
      <li class="active"><a href="#info">Information</a></li>
	      <li><a href="#consent">Consent Form</a></li>
      <li><a href="#q1">Q1</a></li>
		<li><a href="#q2">Q2</a></li>
		<li><a href="#q3">Q3</a></li>
		<li><a href="#q4">Q4</a></li>
    </ul>
  </div>
</nav>

<div class="jumbotron text-center">
<h1>Survey on Bayesian Networks</h1>
</div>

<div class="container">
  <div class="row">
	  <h1 id="info">Participants Information</h1>
	  
	 <h4>
Thank you for helping us test our Bayesian Network explainer system.

<br>Here you will see a Bayesian Network, some evidence and an explained output.

<br>The Bayesian Network we will be using as an example is used for medical diagnosis. 
<br>In particular, it is used to determine the chances that a patient has lung cancer, given their symptoms, risk factors and medical history.
 </h4>
	  
	</div>
	<hr>
	
	<div class="row"> 	  <h1 id="consent">Consent Form</h1> </div>

	
	 <div class="row">
	  <h1 id="q1">Q1</h1>
	  
	 <p class="textbig">

<br>Here you will see a Bayesian Network, some evidence and an explained output.

<br>The Bayesian Network we will be using as an example is used for medical diagnosis. 
<br>In particular, it is used to determine the chances that a patient has lung cancer, given their symptoms, risk factors and medical history.
 </p>
	  
	

  <!-- Bayesian Network graph -->
	<img src="/static/graph.png" />
	</div>
	 <hr> 
	  
	<div class="row" id="q2"> 	  
  <!-- Table with explanation of the variables in the BN -->
  <table border="1" class="dataframe data">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Variable</th>
      <th>Meaning</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>smoke</td>
      <td>Whether the patient smokes</td>
    </tr>
    <tr>
      <th>1</th>
      <td>asia</td>
      <td>Whether the patient has recently been to Asia</td>
    </tr>
    <tr>
      <th>2</th>
      <td>lung</td>
      <td>Whether the patient has lung cancer</td>
    </tr>
    <tr>
      <th>3</th>
      <td>bronc</td>
      <td>Whether the patient has bronchitis</td>
    </tr>
    <tr>
      <th>4</th>
      <td>tub</td>
      <td>Whether the patient has tuberculosis</td>
    </tr>
    <tr>
      <th>5</th>
      <td>either</td>
      <td>True if the patient has either lung cancer or tuberculosis</td>
    </tr>
    <tr>
      <th>6</th>
      <td>xray</td>
      <td>Whether the patient's xray results show an abnormality</td>
    </tr>
    <tr>
      <th>7</th>
      <td>dysp</td>
      <td>Whether the patient experiences shortness of breath (dyspnea)</td>
    </tr>
  </tbody>
</table>
	</div>
  
  <!-- Relation of evidence -->
  <div>
    
    <p> We have observed that: </p>
    
    <ul>
    
      <li>the patient&#39;s xray results are normal</li>
    
      <li>the patient does not smoke</li>
    
      <li>the patient has tuberculosis</li>
    
      <li>the patient has recently visited Asia</li>
    
    </ul>
  </div>
	 
	   <p class="textbig" id="q3">
  <!-- Interactive container with the explanation -->
  
    <div class="tabcontent">
    
      <p> The baseline probability that the patient has lung cancer is 5.50% </p> <hr>
    
    <img src="/static/graph_0.png" />
    </div>
  
    <div class="tabcontent">
    
      <p> We have observed that the patient&#39;s xray results are normal </p> <hr>
    
      <p> this extremely increases the likelihood that the patient does not have tuberculosis nor lung cancer </p> <hr>
    
      <p> this extremely decreases the likelihood that the patient has lung cancer </p> <hr>
    
      <p> This consideration changes the probability that the patient has lung cancer from 5.50% to 0.24% </p> <hr>
    
    <img src="/static/graph_1.png" />
    </div>
  
    <div class="tabcontent">
    
      <p> We have observed that the patient does not smoke </p> <hr>
    
      <p> this greatly decreases the likelihood that the patient has lung cancer </p> <hr>
    
      <p> This consideration changes the probability that the patient has lung cancer from 0.24% to 0.04% </p> <hr>
    
    <img src="/static/graph_2.png" />
    </div>
  
    <div class="tabcontent">
    
      <p> After taking into account these 3 arguments, we conclude that the probability that the patient has lung cancer is 0.04% </p> <hr>
    
    <img src="/static/graph_3.png" />
    </div>
  
    </p> <hr>
	
	<p class="textbig" id="q4">
  <!-- Javascript visualization -->
  <svg id="bbn"></svg>
  
		</p> <hr>
	<!-- Survey -->  
	  <iframe src="https://hwsml.eu.qualtrics.com/jfe/form/SV_ey5G9YtIJMr2hAW" height="800px" width="600px">TEST SURVEY</iframe>

  <form action="." method="POST">
    <p> Is there a mistake in the network? </p>
    <input type="text" name="text1">
    <p> If so, where is the mistake? </p>
    <input type="text" name="text2">
    <input type="submit" name="my-form" value="Submit">
  </form>
  
  </div>
</div>   
    
</body>
</html>