

<!DOCTYPE html>
<html lang="en">
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <link href="stylenav.css" rel="stylesheet" type="text/css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
	<link rel="stylesheet" href="path/to/font-awesome/css/font-awesome.min.css">


  <title>Survey Bayesian Networks</title>
  <meta charset="utf-8">


</head>

<body>

<!-- Navigation bar -->
<nav class="navbar navbar-default navbar-fixed-top navbar-customclass">
  <div class="container">
    <div class="navbar-header">
      <a class="navbar-brand" href="#index.html" style="color: #BC2F31"><strong>Survey</strong></a>

      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      <sapn class="icon-bar"></sapn>
      </button>
    </div>
    <ul class="nav navbar-nav navbar-right collapse navbar-collapse">
      <li class="active"><a href="#info">Information</a></li>
	      <li><a href="#consent">Consent Form</a></li>

		
		<li><a href="#demographics">Demographics</a></li>
		
	

				<li><a href="#instructions">Instructions</a></li>

<!--
		q1 => treatment no mistake
		q2  => control no mistake
		q3 => treatment mistake
		q4 => ccontrol mistake
-->
      <li><a href="#q1">Task 11</a></li>
		<li><a href="#q2">Task 2</a></li>
		<li><a href="#q3">Task 3</a></li>
		<li><a href="#q4">Task 4</a></li>
    </ul>
  </div>
</nav>

<div class="jumbotron text-center" id="index.html">
<h1>Study title: Explaining Bayesian Networks</h1>
</div>

<div class="container">
<div class="container-fluid">

		
			<span class="anchor" id="info"></span>
<div class="section"></div>
	   <br><br>	
		

<div class="container">
  <button type="button" class="btn btn-light" data-toggle="collapse" data-target="#demo"     margin-bottom="0px" text-align="left"> <h1>Participant Information</h1><h5>( Click for collapse/expand )</h5><i class="fa"></i></button>
  <div id="demo" class="collapse">

	
	  
	  
	<table class="table table-bordered">
		<thead>

  <tbody>
    <tr>
      <td>
Project title:</td>
      <td>Explaining Bayesian Networks</td>
    </tr>
    <tr>
      <td>Principal investigator:</td>
      <td>Jaime Sevilla</td>
    </tr>
    <tr>
      <td>Researchers collecting data</td>
      <td>Jaime Sevilla <br> Miruna Clinciu</td>
    </tr>
    <tr>
      <td>Funder (if applicable):</td>
      <td>Jaime Sevilla is supported by the NL4XAI project and the European Union’s
Horizon 2020 research and innovation programme under the Marie Skłodowska-
Curie grant agreement No 860621. <br> Miruna Clinciu is supported by the EPSRC Centre for Doctoral Training in Robotics and Autonomous Systems at Heriot-Watt University and the University of Edinburgh. Clinciu’s PhD is funded by Schlumberger Cambridge Research Limited (EP/L016834/1, 2018-2021).</td>
    </tr>
	  
  </tbody>
		</thead>
</table>


	
	 <h4>
This study was certified according by the Physical Sciences & Engineering Ethics Board on date X. Please take time to read the following information carefully. You should keep this page for your records. <br><br>
 
1. Who are the researchers?<br>
This study is conducted by Jaime Sevilla, PhD student at University of Aberdeen and Miruna-Adriana Clinciu affiliated with Edinburgh Centre for Robotics.<br><br>
 
2. What is the purpose of the study?<br>
Computers are making many decisions on our behalf and it is important for people to be able to understand the decisions that are being made. The point of this study is to provide people with various types of explanations of computer decisions so that we can learn what types of explanations work best. <br><br>
 
3. Why have I been asked to take part?<br>
You are an expert on AI who has worked before with the AI system we are explaining - Bayesian Networks. You have been asked to participate because we believe you are over 18 years old and fit this profile.<br><br>
 
4. Do I have to take part?<br>
No – participation in this study is entirely up to you. You can withdraw from the study at any time, without giving a reason. Your rights will not be affected. If you wish to withdraw, contact the PI. We will stop using your data in any publications or presentations submitted after you have withdrawn consent. However, we will keep copies of your original consent, and of your withdrawal request.<br><br>
 
5. What will happen if I decide to take part?<br>
You will be asked to take an online survey that is approximately 30 minutes long. The survey will show you one graph and explanations generated about it. You will then be asked to answer some questions about the graph you saw and the accuracy of the explanations. We will also collect basic demographic information such as age range and gender. <br><br>
 
6. Compensation.<br>
You will not be compensated for your participation in this study.<br><br>
 
7. Are there any risks associated with taking part?<br>
There are no significant risks associated with participation.<br><br>
 
8. What will happen to the results of this study?<br>
The results of this study may be summarised in published articles, reports and presentations. Quotes or key findings will be anonymized: we will remove any information that could, in our assessment, allow anyone to identify you. With your consent, information can also be used for future research. The full survey data may be archived for a minimum of 2 years.<br><br>
 
9. Data sharing and access.<br>
An anonymised version of the collected dataset will be made available for public download in order to support open science and reproducibility of research results. We will remove all identifying data from this data set, such as any answers that we feel may identify you.<br><br>
 
10. Data protection and confidentiality.<br>
The full survey data will be processed in accordance with the Data Protection Law. All information collected about you will be kept strictly confidential. Your data will be referred to by a unique participant number rather than by name. All electronic data will be registered using SurveyJS secure servers, then downloaded on the principal investigator’s password-protected computer, or on the University’s secure encrypted cloud storage services (DataShare, ownCloud, or Sharepoint) and all paper records will be stored in a locked filing cabinet in the PI’s office. Your consent information will be kept separately from your responses in order to minimise risk.<br><br>
 
11. What are my data protection rights?<br>
The University of Aberdeen is a Data Controller for the information you provide. You have the right to access information held about you. Your right of access can be exercised in accordance with Data Protection Law. You also have other rights including rights of correction, erasure and objection. However, we recommend that you exercise these rights shortly after the survey, as after we will remove your identifying data it will no longer be possible for us to identify which rows contain your data. For more details, including the right to lodge a complaint with the Information Commissioner’s Office, please visit www.ico.org.uk. Questions, comments and requests about your personal data can also be sent to the Convener of the Physical Sciences & Engineering Ethics Board at the University of Aberdeen: Email: <a href="mailto:mc191@hw.ac.uk">copsethics@abdn.ac.uk</a>.<br><br>
 
 
12. Who can I contact?<br>
If you have any further questions about the study, please contact, Miruna Clinciu via email <a href="mailto:mc191@hw.ac.uk">mc191@hw.ac.uk</a> or Jaime Sevila via email <a href="mailto:j.sevilla.20@abdn.ac.uk">j.sevilla.20@abdn.ac.uk</a>.<br>
If you wish to make a complaint about the study, please contact <a href="mailto:mc191@hw.ac.uk">copsethics@abdn.ac.uk</a>. When you contact us, please provide the study title and detail the nature of your complaint.<br><br>
 
13. Updated information.<br>
If the research project changes in any way, an updated Participant Information Sheet will be made available on <a href="https://jsevillamol.github.io/explainBN/">https://jsevillamol.github.io/explainBN/</a> <br>
14. Alternative formats. <br>
To request this document in an alternative format, such as large print or on coloured paper, please contact Jaime Sevila via email <a href="mailto:j.sevilla.20@abdn.ac.uk">j.sevilla.20@abdn.ac.uk</a>.<br>
15. General information. <br>
For general information about how we use your data, the University’s Privacy Notice for Research Participants is available <a href="https://www.abdn.ac.uk/about/privacy/research-participants-938.php">here.</a> <br><br>

 </h4>
	  
	</div>    

	
	<hr>

<div class="container">
<div class="row"> 	  
	
			
			<span class="anchor" id="consent"></span>
<div class="section"></div>
	   
<br><br>
  <h1>Consent Form</h1> 
  
  <!-- Libraries for SurveyJS -->
<link href="https://unpkg.com/survey-jquery@1.8.60/modern.css" type="text/css" rel="stylesheet" />
<script src="https://unpkg.com/survey-jquery@1.8.60/survey.jquery.min.js"></script>

<!-- Form container -->
<div id="consentFormContainer"></div>
  
<script>
Survey.StylesManager.applyTheme("modern");

var surveyJSON = { surveyId: '67a2625c-4cef-4342-a966-74432c5cb3e8', 
                   surveyPostId: '38fc3d75-8b29-4c2d-ad2e-d84aed291ba5'}

var survey = new Survey.Model(surveyJSON);
$("#consentFormContainer").Survey({
    model: survey,
});
</script>

  
	</div></div>
	
	<br>
	
	
<div class="container">
<div class="row"> 	  
	
			
			<span class="anchor" id="instructions"></span>
<div class="section"></div>
	   
<br><br>
  <h1>Instructions</h1> 
  
The survey consists of five main sections: <strong>Participant Information</strong>, <strong>Consent Form</strong>, <strong>Demographics</strong>, <strong>Instructions</strong> and <strong>Tasks</strong>.  <br> <br>

There are <strong>four tasks</strong>, and for each task you will receive the following: <br>
<ol>
<li>A series of observations that have been given as input into the system </li>
	<li>An interactive visualization tool</li>
<li>Some questions about the system </li>
	</ol>

We would like you to read the inputs to the system, and interact with the visualization tool, then answer the questions. You may use the visualization tool as many times as you want while answering the questions. Once you are satisfied with your answers, press the “submit” button and move on to the next task. <br>

  
	</div></div>
	
	<br>
	
	
	
<div class="container">
	<div class="row"> 
		
			<span class="anchor" id="demographics"></span>
<div class="section"></div>
	    <br><br>	
  <h1>Demographics</h1> 
  
  <!-- Libraries for SurveyJS -->
<link href="https://unpkg.com/survey-jquery@1.8.60/modern.css" type="text/css" rel="stylesheet" />
<script src="https://unpkg.com/survey-jquery@1.8.60/survey.jquery.min.js"></script>

<!-- Form container -->
<div id="surveyContainer"></div>
  
<script>
Survey.StylesManager.applyTheme("modern");

var surveyJSON = {title:"question2",pages:[{name:"page1",elements:[{type:"checkbox",name:"question1",title:"Please select your age",choices:[{value:"item1",text:"18 - 22"},{value:"item2",text:"23 - 29"},{value:"item3",text:"30 - 39"},{value:"item4",text:"40 - 49"},{value:"item5",text:"50 - 59"},{value:"item6",text:"60 +"}]},{type:"checkbox",name:"question2",title:"Please select your gender",choices:[{value:"item1",text:"Female"},{value:"item2",text:"Male"},{value:"item3",text:"Other"},{value:"item4",text:"Would prefer not to answer"}]},{type:"checkbox",name:"question3",title:"Please select your English Proficiency Level",choices:[{value:"item6",text:"Beginner"},{value:"item7",text:"Elementary"},{value:"item1",text:"Intermediate"},{value:"item2",text:"Pre-Intermediate"},{value:"item3",text:"Upper Intermediate"},{value:"item4",text:"Advanced"},{value:"item5",text:"Proficiency"}],otherText:"Elementary"},{type:"checkbox",name:"question4",title:"What level of expertise to you have in the field of Artificial Intelligence?",choices:[{value:"item1",text:"Beginner or Amateur - just started to know about general issues or want to get insights on this topic"},{value:"item2",text:"User - can answer general questions and have some basic concepts"},{value:"item3",text:"Professional - can answer and discuss domain-specific well"},{value:"item4",text:"Expert - highly informative and can timely answer critical questions"}]}]}],showTitle:false}

function sendDataToServer(survey) {
    survey.sendResult('24e9d4cd-f5f6-4742-858a-6506c5e47565');
}

var survey = new Survey.Model(surveyJSON);
$("#surveyContainer").Survey({
    model: survey,
    onComplete: sendDataToServer
});
</script>

  
	</div></div>
	
	
	<div class="container">
  
	 <div class="row">
	  
	  
	 <p class="textbig">

<br>Here you will see a Bayesian Network, some evidence and an explained output.

<br>The Bayesian Network we will be using as an example is used for medical diagnosis. 
<br>In particular, it is used to determine the chances that a patient has lung cancer, given their symptoms, risk factors and medical history.
 </p>
	
  
	

  <!-- Bayesian Network graph -->
	<img src="/explainBN/static/graph.png" />
		</div></div>
	 <hr> 
   
  <table class="table table-bordered">
<!--   <table border="1" class="dataframe data"> -->
  <thead>
    <tr style="text-align: right;">
      <th>Variable</th>
      <th>Meaning</th>
    </tr>
  </thead>
  <tbody>
  
    <tr>
      <td>smoke</td>
      <td>Whether the patient smokes</td>
    </tr>
  
    <tr>
      <td>asia</td>
      <td>Whether the patient has recently been to Asia</td>
    </tr>
  
    <tr>
      <td>lung</td>
      <td>Whether the patient has lung cancer</td>
    </tr>
  
    <tr>
      <td>bronc</td>
      <td>Whether the patient has bronchitis</td>
    </tr>
  
    <tr>
      <td>tub</td>
      <td>Whether the patient has tuberculosis</td>
    </tr>
  
    <tr>
      <td>lung_disease</td>
      <td>True if the patient has either lung cancer or tuberculosis</td>
    </tr>
  
    <tr>
      <td>xray</td>
      <td>Whether the patient&#39;s xray results show an abnormality</td>
    </tr>
  
    <tr>
      <td>dysp</td>
      <td>Whether the patient experiences shortness of breath (dyspnea)</td>
    </tr>
  
  </tbody>
</table>
	
	</div>
	
	<div class="container">

	 <div class="row">
		 	
	<span class="anchor" id="q1"></span>
<br><br>	   
	 
<!--  <h1>Treatment no mistake</h1>-->
  <h1>Task 1</h1>
  <div>
  
  <p> We have observed that: </p>
  
  <ul>
  
    <li>the patient smokes</li>
  
    <li>the patient has recently visited Asia</li>
  
  </ul>
</div>
  
  <style>
/* Style the tab */
.tab {
  overflow: hidden;
  border: 1px solid #ccc;
  background-color: #f1f1f1;
}

/* Style the buttons that are used to open the tab content */
.tab button {
  background-color: inherit;
  float: left;
  border: none;
  outline: none;
  cursor: pointer;
  padding: 14px 16px;
  transition: 0.3s;
}

/* Change background color of buttons on hover */
.tab button:hover {
  background-color: #ddd;
}

/* Create an active/current tablink class */
.tab button.active {
  background-color: #ccc;
}

/* Style the tab content */
.tabcontent {
  display: none;
  padding: 6px 12px;
  border: 1px solid #ccc;
  border-top: none;
}
</style>

<script>
function openTab(evt, tabName) {
  // Declare all variables
  var i, tabcontent, tablinks;

  // Get all elements with class="tabcontent" and hide them
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }

  // Get all elements with class="tablinks" and remove the class "active"
  tablinks = document.getElementsByClassName("tablinks");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }

  // Show the current tab, and add an "active" class to the button that opened the tab
  document.getElementById(tabName).style.display = "block";
  evt.currentTarget.className += " active";
}
</script>

<div class="tab">

  <button class="tablinks" onclick="openTab(event, 'explanation_treatment_no_mistake_0')" id="explanation_treatment_no_mistake_button_0">
    0
  </button>

  <button class="tablinks" onclick="openTab(event, 'explanation_treatment_no_mistake_1')" id="explanation_treatment_no_mistake_button_1">
    1
  </button>

  <button class="tablinks" onclick="openTab(event, 'explanation_treatment_no_mistake_2')" id="explanation_treatment_no_mistake_button_2">
    2
  </button>

</div>



  <div id="explanation_treatment_no_mistake_0", class="tabcontent">
  <p>
  
     The baseline probability that the patient has lung cancer is 5.50% 
  
  </p> <hr>
  <img src="/explainBN/static/io_no_mistake_0.png" />
  </div>

  <div id="explanation_treatment_no_mistake_1", class="tabcontent">
  <p>
  
     We have observed that the patient smokes 
  
     this moderately increases the likelihood that the patient has lung cancer 
  
     This consideration changes the probability that the patient has lung cancer from 5.50% to 10.00% 
  
  </p> <hr>
  <img src="/explainBN/static/graph_1.png" />
  </div>

  <div id="explanation_treatment_no_mistake_2", class="tabcontent">
  <p>
  
     After taking into account these 2 arguments, we conclude that the probability that the patient has lung cancer is 10.00% 
  
  </p> <hr>
  <img src="/explainBN/static/graph_2.png" />
  </div>


<script>
// Get the element with id="button 0" and click on it
document.getElementById("explanation_treatment_no_mistake_button_0").click();
</script>
  
		 
<link href="https://unpkg.com/survey-jquery@1.8.60/modern.css" type="text/css" rel="stylesheet" />
<script src="https://unpkg.com/survey-jquery@1.8.60/survey.jquery.min.js"></script>

<!-- SurveyJS container -->
<div id="surveyContainer_survey_treatment_no_mistake"></div>

<!-- Script that fetches and submits the survey -->
<script>
Survey.StylesManager.applyTheme("modern");

function sendDataToServer_survey_treatment_no_mistake(survey) {
  survey.setValue("bn", "asia")
  survey.setValue("p", 0.09999999100000091)
  survey.setValue("is_treatment", true)
  survey.setValue("mistake", "no mistake")
  survey.sendResult('2fd3f481-70d1-4b40-ab8b-611d89238ad5');
}

var surveyJSON = { surveyId: 'b48b6122-d333-462a-bd57-34ca878560e7', 
                   surveyPostId: '2fd3f481-70d1-4b40-ab8b-611d89238ad5'}

var survey_survey_treatment_no_mistake = new Survey.Model(surveyJSON);

$("#surveyContainer_survey_treatment_no_mistake").Survey({
    model: survey_survey_treatment_no_mistake,
    onComplete: sendDataToServer_survey_treatment_no_mistake
});
</script> </div>
	<br>
   <div class="row">
	<span class="anchor" id="q2"></span>
	  
<div class="section"></div>
	    <br><br>	 
<!--<h1>Control no mistake</h1>-->
<h1>Task 2</h1>
  
  <div>
  
  <p> We have observed that: </p>
  
  <ul>
  
    <li>the patient has tuberculosis</li>
  
    <li>the patient experiences shortness of breath</li>
  
    <li>the patient has recently visited Asia</li>
  
    <li>the patient has bronchitis</li>
  
  </ul>
</div>
  
  <!-- Libraries for JSBayes-viz -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script src="/explainBN/static/node_modules/d3/d3.js"></script>
<script src="/explainBN/static/node_modules/lodash/lodash.js"></script>
<script src="/explainBN/static/node_modules/graphlib/dist/graphlib.core.js"></script>
<script src="/explainBN/static/node_modules/dagre/dist/dagre.core.js"></script>
<script src="/explainBN/static/node_modules/jsbayes/jsbayes.js"></script>
<script src="/explainBN/static/node_modules/jsbayes-viz/jsbayes-viz.js"></script>

<style>
    svg { border: 1px solid black; }
    svg g rect.node-shape { border-radius: 5px !important; fill:#cceeff !important; cursor: move; }
    svg g text.node-name { font-weight: 800 !important }
    svg g rect.node-bar { fill: DodgerBlue !important }
    svg g text.node-value { fill:rgb(0,0,0) !important; font-size: 15px; cursor: pointer; }
    svg line.edge-line { stroke:rgb(0,0,0) !important }
    svg path.edge-head { fill:rgb(0,0,0) !important }
</style>

<script>
  function getGraph_explanation_control_no_mistake() {
    
    var graph = jsbayes.newGraph();
    graph.saveSamples = false;
    
    <!-- Add nodes to graph -->
    
    var asia = graph.addNode( 'asia', [ 'yes',   'no',  ]);
    
    var tub = graph.addNode( 'tub', [ 'yes',   'no',  ]);
    
    var smoke = graph.addNode( 'smoke', [ 'yes',   'no',  ]);
    
    var lung = graph.addNode( 'lung', [ 'yes',   'no',  ]);
    
    var bronc = graph.addNode( 'bronc', [ 'yes',   'no',  ]);
    
    var lung_disease = graph.addNode( 'lung_disease', [ 'yes',   'no',  ]);
    
    var xray = graph.addNode( 'xray', [ 'abnormal',   'normal',  ]);
    
    var dysp = graph.addNode( 'dysp', [ 'yes',   'no',  ]);
    
    
    <!-- Add edges to graph -->
    
    tub.addParent(asia);
    
    lung_disease.addParent(tub);
    
    lung.addParent(smoke);
    
    bronc.addParent(smoke);
    
    lung_disease.addParent(lung);
    
    dysp.addParent(bronc);
    
    xray.addParent(lung_disease);
    
    dysp.addParent(lung_disease);
    
    
    <!-- Add CPDs to graph -->
    
    asia.setCpt([0.01, 0.99]);
    
    tub.setCpt([[0.05, 0.95], [0.01, 0.99]]);
    
    smoke.setCpt([0.5, 0.5]);
    
    lung.setCpt([[0.1, 0.9], [0.01, 0.99]]);
    
    bronc.setCpt([[0.6, 0.4], [0.3, 0.7]]);
    
    lung_disease.setCpt([[1.0, 0.0], [1.0, 0.0], [1.0, 0.0], [0.0, 1.0]]);
    
    xray.setCpt([[0.98, 0.02], [0.05, 0.95]]);
    
    dysp.setCpt([[0.9, 0.1], [0.7, 0.3], [0.8, 0.2], [0.1, 0.9]]);
    

    graph.sample(20000);

    var g = jsbayesviz.fromGraph(graph);
    return g;
  }
      
  $(document).ready(function() {
    (function(window) { 
      var graph_explanation_control_no_mistake = getGraph_explanation_control_no_mistake();
      jsbayesviz.draw({
        id: '#explanation_control_no_mistake',
        width: 800,
        height: 800,
        graph: graph_explanation_control_no_mistake,
        samples: 15000
      });
      
      
    })(window);
  });
</script>

<svg id="explanation_control_no_mistake"></svg>
  
	   
<link href="https://unpkg.com/survey-jquery@1.8.60/modern.css" type="text/css" rel="stylesheet" />
<script src="https://unpkg.com/survey-jquery@1.8.60/survey.jquery.min.js"></script>

<!-- SurveyJS container -->
<div id="surveyContainer_survey_control_no_mistake"></div>

<!-- Script that fetches and submits the survey -->
<script>
Survey.StylesManager.applyTheme("modern");

function sendDataToServer_survey_control_no_mistake(survey) {
  survey.setValue("bn", "asia")
  survey.setValue("p", 0.07)
  survey.setValue("is_treatment", false)
  survey.setValue("mistake", "no mistake")
  survey.sendResult('2fd3f481-70d1-4b40-ab8b-611d89238ad5');
}

var surveyJSON = { surveyId: 'b48b6122-d333-462a-bd57-34ca878560e7', 
                   surveyPostId: '2fd3f481-70d1-4b40-ab8b-611d89238ad5'}

var survey_survey_control_no_mistake = new Survey.Model(surveyJSON);

$("#surveyContainer_survey_control_no_mistake").Survey({
    model: survey_survey_control_no_mistake,
    onComplete: sendDataToServer_survey_control_no_mistake
});
</script> </div> <br>
  
	

   <div class="row">
	   
	     	
	<span class="anchor" id="q3"></span>
	 
<div class="section"></div>
	     <br><br>	

<!--  <h1>Treatment mistake</h1>-->
  
	   <h1>Task 3</h1>
  <div>
  
  <p> We have observed that: </p>
  
  <ul>
  
    <li>the patient has tuberculosis</li>
  
    <li>the patient&#39;s xray results show an abnormality</li>
  
  </ul>
</div>
  
  <style>
/* Style the tab */
.tab {
  overflow: hidden;
  border: 1px solid #ccc;
  background-color: #f1f1f1;
}

/* Style the buttons that are used to open the tab content */
.tab button {
  background-color: inherit;
  float: left;
  border: none;
  outline: none;
  cursor: pointer;
  padding: 14px 16px;
  transition: 0.3s;
}

/* Change background color of buttons on hover */
.tab button:hover {
  background-color: #ddd;
}

/* Create an active/current tablink class */
.tab button.active {
  background-color: #ccc;
}

/* Style the tab content */
.tabcontent {
  display: none;
  padding: 6px 12px;
  border: 1px solid #ccc;
  border-top: none;
}
</style>

<script>
function openTab(evt, tabName) {
  // Declare all variables
  var i, tabcontent, tablinks;

  // Get all elements with class="tabcontent" and hide them
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }

  // Get all elements with class="tablinks" and remove the class "active"
  tablinks = document.getElementsByClassName("tablinks");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }

  // Show the current tab, and add an "active" class to the button that opened the tab
  document.getElementById(tabName).style.display = "block";
  evt.currentTarget.className += " active";
}
</script>

<div class="tab">

  <button class="tablinks" onclick="openTab(event, 'explanation_treatment_mistake_0')" id="explanation_treatment_mistake_button_0">
    0
  </button>

  <button class="tablinks" onclick="openTab(event, 'explanation_treatment_mistake_1')" id="explanation_treatment_mistake_button_1">
    1
  </button>

  <button class="tablinks" onclick="openTab(event, 'explanation_treatment_mistake_2')" id="explanation_treatment_mistake_button_2">
    2
  </button>

</div>



  <div id="explanation_treatment_mistake_0", class="tabcontent">
  <p>
  
     The baseline probability that the patient has lung cancer is 5.50% 
  
  </p> <hr>
  <img src="/explainBN/static/io_mistake_0.png" />
  </div>

  <div id="explanation_treatment_mistake_1", class="tabcontent">
  <p>
  
     We have observed that the patient&#39;s xray results show an abnormality 
  
     this extremely increases the likelihood that the patient has a serious lung disease 
  
     this moderately increases the likelihood that the patient has lung cancer 
  
     This consideration changes the probability that the patient has lung cancer from 5.50% to 9.97% 
  
  </p> <hr>
  <img src="/explainBN/static/graph_1.png" />
  </div>

  <div id="explanation_treatment_mistake_2", class="tabcontent">
  <p>
  
     After taking into account these 2 arguments, we conclude that the probability that the patient has lung cancer is 9.97% 
  
  </p> <hr>
  <img src="/explainBN/static/graph_2.png" />
  </div>


<script>
// Get the element with id="button 0" and click on it
document.getElementById("explanation_treatment_mistake_button_0").click();
</script>
  
	   
<link href="https://unpkg.com/survey-jquery@1.8.60/modern.css" type="text/css" rel="stylesheet" />
<script src="https://unpkg.com/survey-jquery@1.8.60/survey.jquery.min.js"></script>

<!-- SurveyJS container -->
<div id="surveyContainer_survey_treatment_mistake"></div>

<!-- Script that fetches and submits the survey -->
<script>
Survey.StylesManager.applyTheme("modern");

function sendDataToServer_survey_treatment_mistake(survey) {
  survey.setValue("bn", "asia")
  survey.setValue("p", 0.09970863530340106)
  survey.setValue("is_treatment", true)
  survey.setValue("mistake", "lung")
  survey.sendResult('2fd3f481-70d1-4b40-ab8b-611d89238ad5');
}

var surveyJSON = { surveyId: 'b48b6122-d333-462a-bd57-34ca878560e7', 
                   surveyPostId: '2fd3f481-70d1-4b40-ab8b-611d89238ad5'}

var survey_survey_treatment_mistake = new Survey.Model(surveyJSON);

$("#surveyContainer_survey_treatment_mistake").Survey({

    model: survey_survey_treatment_mistake,
    onComplete: sendDataToServer_survey_treatment_mistake
});
</script> </div> <br>


	 <div class="row">

  	
	<span class="anchor" id="q4"></span>
		
<div class="section"></div>
	 <br><br>	
		 
<!--  <h1>Control mistake</h1>-->
  
		    <h1>Task 4</h1>
  <div>
  
  <p> We have observed that: </p>
  
  <ul>
  
    <li>the patient has tuberculosis</li>
  
    <li>the patient experiences shortness of breath</li>
  
    <li>the patient&#39;s xray results show an abnormality</li>
  
    <li>the patient does not smoke</li>
  
    <li>the patient has not recently visited Asia</li>
  
    <li>the patient does not have bronchitis</li>
  
  </ul>
</div>
  
  <!-- Libraries for JSBayes-viz -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script src="/explainBN/static/node_modules/d3/d3.js"></script>
<script src="/explainBN/static/node_modules/lodash/lodash.js"></script>
<script src="/explainBN/static/node_modules/graphlib/dist/graphlib.core.js"></script>
<script src="/explainBN/static/node_modules/dagre/dist/dagre.core.js"></script>
<script src="/explainBN/static/node_modules/jsbayes/jsbayes.js"></script>
<script src="/explainBN/static/node_modules/jsbayes-viz/jsbayes-viz.js"></script>

<style>
    svg { border: 1px solid black; }
    svg g rect.node-shape { border-radius: 5px !important; fill:#cceeff !important; cursor: move; }
    svg g text.node-name { font-weight: 800 !important }
    svg g rect.node-bar { fill: DodgerBlue !important }
    svg g text.node-value { fill:rgb(0,0,0) !important; font-size: 15px; cursor: pointer; }
    svg line.edge-line { stroke:rgb(0,0,0) !important }
    svg path.edge-head { fill:rgb(0,0,0) !important }
</style>

<script>
  function getGraph_explanation_control_mistake() {
    
    var graph = jsbayes.newGraph();
    graph.saveSamples = false;
    
    <!-- Add nodes to graph -->
    
    var asia = graph.addNode( 'asia', [ 'yes',   'no',  ]);
    
    var tub = graph.addNode( 'tub', [ 'yes',   'no',  ]);
    
    var smoke = graph.addNode( 'smoke', [ 'yes',   'no',  ]);
    
    var lung = graph.addNode( 'lung', [ 'yes',   'no',  ]);
    
    var bronc = graph.addNode( 'bronc', [ 'yes',   'no',  ]);
    
    var lung_disease = graph.addNode( 'lung_disease', [ 'yes',   'no',  ]);
    
    var xray = graph.addNode( 'xray', [ 'abnormal',   'normal',  ]);
    
    var dysp = graph.addNode( 'dysp', [ 'yes',   'no',  ]);
    
    
    <!-- Add edges to graph -->
    
    tub.addParent(asia);
    
    lung_disease.addParent(tub);
    
    lung.addParent(smoke);
    
    bronc.addParent(smoke);
    
    lung_disease.addParent(lung);
    
    dysp.addParent(bronc);
    
    xray.addParent(lung_disease);
    
    dysp.addParent(lung_disease);
    
    
    <!-- Add CPDs to graph -->
    
    asia.setCpt([0.01, 0.99]);
    
    tub.setCpt([[0.05, 0.95], [0.01, 0.99]]);
    
    smoke.setCpt([0.5, 0.5]);
    
    lung.setCpt([[0.1, 0.9], [0.01, 0.99]]);
    
    bronc.setCpt([[0.6, 0.4], [0.3, 0.7]]);
    
    lung_disease.setCpt([[1.0, 0.0], [1.0, 0.0], [1.0, 0.0], [0.0, 1.0]]);
    
    xray.setCpt([[0.98, 0.02], [0.05, 0.95]]);
    
    dysp.setCpt([[0.9, 0.1], [0.7, 0.3], [0.8, 0.2], [0.1, 0.9]]);
    

    graph.sample(20000);

    var g = jsbayesviz.fromGraph(graph);
    return g;
  }
      
  $(document).ready(function() {
    (function(window) { 
      var graph_explanation_control_mistake = getGraph_explanation_control_mistake();
      jsbayesviz.draw({
        id: '#explanation_control_mistake',
        width: 800,
        height: 800,
        graph: graph_explanation_control_mistake,
        samples: 15000
      });
      
      
    })(window);
  });
</script>

<svg id="explanation_control_mistake"></svg>
  
		 
<link href="https://unpkg.com/survey-jquery@1.8.60/modern.css" type="text/css" rel="stylesheet" />
<script src="https://unpkg.com/survey-jquery@1.8.60/survey.jquery.min.js"></script>

<!-- SurveyJS container -->
<div id="surveyContainer_survey_control_mistake"></div>

<!-- Script that fetches and submits the survey -->
<script>
Survey.StylesManager.applyTheme("modern");

function sendDataToServer_survey_control_mistake(survey) {
  survey.setValue("bn", "asia")
  survey.setValue("p", 0.99)
  survey.setValue("is_treatment", false)
  survey.setValue("mistake", "lung")
  survey.sendResult('2fd3f481-70d1-4b40-ab8b-611d89238ad5');
}

var surveyJSON = { surveyId: 'b48b6122-d333-462a-bd57-34ca878560e7', 
                   surveyPostId: '2fd3f481-70d1-4b40-ab8b-611d89238ad5'}

var survey_survey_control_mistake = new Survey.Model(surveyJSON);

$("#surveyContainer_survey_control_mistake").Survey({
    model: survey_survey_control_mistake,
    onComplete: sendDataToServer_survey_control_mistake
});
</script> 
  
	
		</div>   </div>  </div> </div>
    
</body>
</html>
